# Context Modules for AI-Assisted Development
# Defines document bundles for different development scenarios
# Updated: 2025-11-17

version: "1.1"

# Context modules define which documents to load for different scenarios
# Token estimates help with context budget planning

modules:
  # Module 1: Onboarding new developers
  onboarding:
    name: "New Developer Onboarding"
    description: "Essential documents for getting started with the project"
    tokens_estimate: 3500
    use_cases:
      - "First time setup"
      - "Understanding project structure"
      - "Learning core concepts"
    documents:
      - 00_index/DESIGN.md
      - 00_index/ORIGIN.md
      - 00_index/INSTALL.md
      - 10_modules/yijinjing.md
      - 10_modules/wingchun.md
    priority: high

  # Module 2: Daily development work
  development:
    name: "Feature Development"
    description: "Documents for implementing features and bug fixes"
    tokens_estimate: 5000
    use_cases:
      - "Implementing new features"
      - "Understanding existing architecture"
      - "Making code changes"
    documents:
      - 00_index/HACKING.md
      - 00_index/ARCHITECTURE.md
      - 10_modules/yijinjing.md
      - 10_modules/wingchun.md
      - 10_modules/binance_extension.md
      - 20_interactions/trading_flow.md
      - 40_config/config_usage_map.md
      - 95_adr/  # Include all ADRs
    priority: high

  # Module 3: Deep architectural understanding
  deep_dive:
    name: "Architectural Deep Dive"
    description: "In-depth system architecture and design decisions"
    tokens_estimate: 6000
    use_cases:
      - "System redesign"
      - "Performance optimization"
      - "Understanding design rationale"
    documents:
      - 00_index/ARCHITECTURE.md
      - 10_modules/yijinjing.md
      - 10_modules/wingchun.md
      - 20_interactions/  # All interaction flows
      - 95_adr/  # All ADRs
    priority: medium

  # Module 4: Troubleshooting and debugging
  troubleshooting:
    name: "Troubleshooting & Debugging"
    description: "Documents for diagnosing and fixing issues"
    tokens_estimate: 4000
    use_cases:
      - "Debugging production issues"
      - "Understanding error messages"
      - "Performance problems"
    documents:
      - 85_memory/DEBUGGING.md
      - 00_index/LOG_LOCATIONS.md
      - 40_config/config_usage_map.md
      - 40_config/dangerous_keys.md
      - 20_interactions/trading_flow.md
      - 10_modules/  # Relevant module cards for context
    priority: high

  # Module 5: Configuration and deployment
  operations:
    name: "Operations & Deployment"
    description: "Documents for deployment, configuration, and maintenance"
    tokens_estimate: 3000
    use_cases:
      - "Deploying to production"
      - "Environment setup"
      - "Configuration changes"
    documents:
      - 00_index/INSTALL.md
      - 00_index/TESTNET.md
      - 40_config/config_usage_map.md
      - 40_config/dangerous_keys.md
      - 90_operations/  # All operations guides
      - 95_adr/001-docker.md
      - 95_adr/002-wsl2.md
      - 95_adr/003-dns.md
    priority: medium

  # Module 6: Testing and quality
  testing:
    name: "Testing & Quality Assurance"
    description: "Documents for testing strategies and quality standards"
    tokens_estimate: 2500
    use_cases:
      - "Writing tests"
      - "Verifying functionality"
      - "Integration testing"
    documents:
      - 00_index/HACKING.md
      - 85_memory/DEBUGGING.md
      - 95_adr/004-binance-market-toggle.md  # Example of tested feature
    priority: low

  # Module 7: Documentation maintenance
  meta:
    name: "Documentation Maintenance"
    description: "Documents about maintaining the documentation system"
    tokens_estimate: 1500
    use_cases:
      - "Updating documentation"
      - "Adding new documents"
      - "RAG optimization"
    documents:
      - 00_index/DESIGN.md
      - 90_operations/  # Documentation procedures
    priority: low

# Context assembly strategies
assembly_strategies:
  # Progressive loading: Start small, expand as needed
  progressive:
    description: "Load minimal context first, expand based on queries"
    initial_module: onboarding
    expansion_order:
      - development
      - troubleshooting
      - deep_dive

  # Role-based: Different contexts for different roles
  role_based:
    description: "Load context based on user role"
    roles:
      new_developer: [onboarding]
      feature_developer: [development, troubleshooting]
      architect: [deep_dive, development]
      operator: [operations, troubleshooting]
      qa_engineer: [testing, troubleshooting]

  # Task-based: Load based on specific task
  task_based:
    description: "Load context based on current task"
    tasks:
      setup_environment: [onboarding, operations]
      implement_feature: [development, deep_dive]
      fix_bug: [troubleshooting, development]
      deploy_system: [operations]
      write_tests: [testing, development]
      update_docs: [meta]

# Token budget guidelines
token_budgets:
  small_context: 5000   # Quick queries, specific questions
  medium_context: 10000 # Feature development, debugging
  large_context: 20000  # Architectural work, major refactoring

# Usage notes
usage:
  - "Choose module based on current task or role"
  - "Modules can be combined but watch token budget"
  - "Update token estimates as documents evolve"
  - "Priority indicates how frequently module is used"
  - "Documents marked with / include all files in that directory"
